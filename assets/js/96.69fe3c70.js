(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{673:function(t,a,e){"use strict";e.r(a);var s=e(1),v=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("Boxx",{attrs:{type:"tip"}}),t._v(" "),e("h2",{attrs:{id:"vite的特点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vite的特点"}},[t._v("#")]),t._v(" Vite的特点")]),t._v(" "),e("ol",[e("li",[t._v("冷启动， 不打包 利用ES6 import")]),t._v(" "),e("li",[t._v("开发时，热更新")]),t._v(" "),e("li",[t._v("按需编译，不会刷新全部DOM。")])]),t._v(" "),e("h2",{attrs:{id:"新建项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新建项目"}},[t._v("#")]),t._v(" 新建项目")]),t._v(" "),e("ol",[e("li",[t._v("新建项目")])]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("npm init vite-app pro-name\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[t._v("加载依赖")])]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("npm install\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[t._v("启动项目")])]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("npm run dev\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"注意"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注意"}},[t._v("#")]),t._v(" 注意")]),t._v(" "),e("ol",[e("li",[t._v("只支持 Vue3 不支持 Vue2")])]),t._v(" "),e("h2",{attrs:{id:"背景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),e("h3",{attrs:{id:"为什么需要构建工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#为什么需要构建工具"}},[t._v("#")]),t._v(" 为什么需要构建工具？")]),t._v(" "),e("p",[t._v("最早的js代码只是简单的堆叠在一起，只要能从上往下依次执行就可以了，但是随着代码量的增加，逻辑也变的更加的复杂，js中就慢慢诞生了"),e("strong",[t._v("模块化")]),t._v("的思想。")]),t._v(" "),e("p",[e("strong",[t._v("模块化")]),t._v("可以帮助我们更好地解决复杂应用开发过程中的代码组织问题， 在js模块化的推进过程中，也衍生了许多规范， 例如"),e("strong",[t._v("AMD，CMD， ESM")]),t._v("等。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img14.360buyimg.com/imagetools/jfs/t1/183919/8/27000/14982/62c43b31E9a57de43/389751fd200c25e9.webp",alt:"alt"}})]),t._v(" "),e("p",[t._v("但是，随着模块化的引入， 在生产环境中， 有"),e("strong",[t._v("环境兼容、模块文件过多、频繁发送请求")]),t._v("等问题")]),t._v(" "),e("h3",{attrs:{id:"发展中的构建工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#发展中的构建工具"}},[t._v("#")]),t._v(" 发展中的构建工具")]),t._v(" "),e("p",[t._v("近些年前端工程化发展迅速，各种构建工具层出不穷，目前Webpack仍然占据统治地位，npm 每周下载量达到两千多万次。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img13.360buyimg.com/imagetools/jfs/t1/202244/2/25024/83057/62c43d67E9639352d/e5db84722580957b.png",alt:"alt"}})]),t._v(" "),e("h3",{attrs:{id:"webpack的痛点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack的痛点"}},[t._v("#")]),t._v(" webpack的痛点")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img11.360buyimg.com/imagetools/jfs/t1/192345/26/26295/621798/62c43e8eE290b2580/5cbefd4363f94f44.png",alt:"alt"}})]),t._v(" "),e("blockquote",[e("p",[e("strong",[t._v("缓慢的开发环境，大大降低了开发者的幸福感，在以上背景下Vite应运而生。")])])]),t._v(" "),e("h2",{attrs:{id:"什么是vite"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是vite"}},[t._v("#")]),t._v(" 什么是Vite？")]),t._v(" "),e("p",[t._v("基于esbuild与Rollup，依靠浏览器自身ESM编译功能，是一种新型前端构建工具，能够显著提升前端开发体验")]),t._v(" "),e("h3",{attrs:{id:"概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[t._v("#")]),t._v(" 概念")]),t._v(" "),e("p",[t._v("Vite 通过在一开始将应用中的模块区分为"),e("u",[t._v("依赖")]),t._v("和 "),e("u",[t._v("源码")]),t._v(" 两类，改进了开发服务器启动时间")]),t._v(" "),e("ul",[e("li",[t._v("依赖：  指开发不会变动的部分(npm包、UI组件库)，esbuild进行预构建。")]),t._v(" "),e("li",[t._v("源码：  浏览器不能直接执行的非js代码(.jsx、.css、.vue等)，vite只在浏览器请求相关源码的时候进行转换，以提供ESM源码。")])]),t._v(" "),e("h3",{attrs:{id:"开发环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开发环境"}},[t._v("#")]),t._v(" 开发环境")]),t._v(" "),e("ul",[e("li",[t._v("利用浏览器原生的ES Module编译能力，省略费时的编译环节，直给浏览器开发环境源码，dev server只提供轻量服务。")]),t._v(" "),e("li",[t._v("浏览器执行ESM的import时，会向dev server发起该模块的ajax请求，服务器对源码做简单处理后返回给浏览器。")]),t._v(" "),e("li",[t._v("Vite中HMR是在原生 ESM 上执行的。当编辑一个文件时，Vite 只需要精确地使已编辑的模块失活，使得无论应用大小如何，HMR 始终能保持快速更新。")]),t._v(" "),e("li",[t._v("使用esbuild处理项目依赖，esbuild使用go编写，比一般node.js编写的编译器快几个数量级。")])]),t._v(" "),e("h3",{attrs:{id:"生产环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生产环境"}},[t._v("#")]),t._v(" 生产环境")]),t._v(" "),e("ul",[e("li",[t._v("集成Rollup打包生产环境代码，依赖其成熟稳定的生态与更简洁的插件机制。")])]),t._v(" "),e("h3",{attrs:{id:"原理分析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#原理分析"}},[t._v("#")]),t._v(" 原理分析")]),t._v(" "),e("p",[t._v("与Webpack-dev-server类似Vite同样使用WebSocket与客户端建立连接，实现热更新，源码实现基本可分为两部分，源码位置在:")]),t._v(" "),e("p",[t._v("vite/packages/vite/src/client client（用于客户端）\nvite/packages/vite/src/node server（用于开发服务器）")]),t._v(" "),e("p",[t._v("client 代码会在启动服务时注入到客户端，用于客户端对于WebSocket消息的处理（如更新页面某个模块、刷新页面）")]),t._v(" "),e("p",[t._v("server 代码是服务端逻辑，用于处理代码的构建与页面模块的请求。")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img11.360buyimg.com/imagetools/jfs/t1/179635/13/26759/1253247/62c440b7E1e057a01/8451dc78abab0f94.png",alt:"alt"}})]),t._v(" "),e("h3",{attrs:{id:"创建vite项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建vite项目"}},[t._v("#")]),t._v(" 创建Vite项目")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img13.360buyimg.com/imagetools/jfs/t1/215080/22/19947/290775/62c4410eEd0d5521a/c6cec8e218aa6bed.png",alt:"alt"}})]),t._v(" "),e("h3",{attrs:{id:"插件系统"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#插件系统"}},[t._v("#")]),t._v(" 插件系统")]),t._v(" "),e("p",[t._v("vite Rollup plugins:\nhttps://vite-rollup-plugins.patak.dev/")]),t._v(" "),e("p",[t._v("社区插件列表:\nhttps://github.com/vitejs/awesome-vite#plugins")]),t._v(" "),e("p",[e("strong",[t._v("使用：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img14.360buyimg.com/imagetools/jfs/t1/1784/28/19238/445813/62c44246E124fc096/e9e32bdb5a775b96.png",alt:"alt"}})]),t._v(" "),e("h3",{attrs:{id:"同时兼容webpack-和vite"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#同时兼容webpack-和vite"}},[t._v("#")]),t._v(" 同时兼容webpack 和Vite")]),t._v(" "),e("p",[t._v("推荐使用插件：\n通过使用下列插件可以轻松使你的项目同时兼容webpack 和Vite")]),t._v(" "),e("p",[t._v("webpack-to-vite：\nhttps://github.com/originjs/webpack-to-vite")]),t._v(" "),e("p",[t._v("wp2vite：\nhttps://github.com/tnfe/wp2vite")])],1)}),[],!1,null,null,null);a.default=v.exports}}]);