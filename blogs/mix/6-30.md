---
title:  算法 - 双指针问题
date: 2021-06-30
categories: 
 - 算法
---
<Boxx type='tip' />


- 题目：   
给定一个包括  n 个整数的数组  nums  和 一个目标值  target。找出  nums  中的三个整数，使得它们的和与  target  最接近。返回这三个数的和。假定每组输入只存在唯一答案。

```
示例：

输入：nums = [-1,2,1,-4], target = 1
输出：2
解释：与 target 最接近的和是 2 (-1 + 2 + 1 = 2) 。
```

- 思路        
先按照升序排序，然后分别从左往右依次选择一个基础点 i（0 <= i <= nums.length - 3），在基础点的右侧用双指针去不断的找最小的差值。
假设基础点是 i，初始化的时候，双指针分别是：

left：i + 1，基础点右边一位。
right: nums.length - 1 数组最后一位。

然后求此时的和，如果和大于 target，那么可以把右指针左移一位，去试试更小一点的值，反之则把左指针右移。
在这个过程中，不断更新全局的最小差值 min，和此时记录下来的和 res。
最后返回 res 即可。

- 答案   
```js
let threeSumClosest = function (nums, target) {
    let n = nums.length
    if (n === 3) {
      return getSum(nums)
    }
    // 先升序排序 此为解题的前置条件
    nums.sort((a, b) => a - b)
  
    let min = Infinity // 和 target 的最小差
    let res
  
    // 从左往右依次尝试定一个基础指针 右边至少再保留两位 否则无法凑成3个
    for (let i = 0; i <= nums.length - 3; i++) {
      let basic = nums[i]
      let left = i + 1 // 左指针先从 i 右侧的第一位开始尝试
      let right = n - 1 // 右指针先从数组最后一项开始尝试
  
      while (left < right) {
        let sum = basic + nums[left] + nums[right] // 三数求和
        // 更新最小差
        let diff = Math.abs(sum - target)
        if (diff < min) {
          min = diff
          res = sum
        }
        if (sum < target) {
          // 求出的和如果小于目标值的话 可以尝试把左指针右移 扩大值
          left++
        } else if (sum > target) {
          // 反之则右指针左移
          right--
        } else {
          // 相等的话 差就为0 一定是答案
          return sum
        }
      }
    }
  
    return res
  }
  
  function getSum(nums) {
    return nums.reduce((total, cur) => total + cur, 0)
  }

  
```

- 要点

1, 利用Array.reduce()计算数组和   
reduce() 方法接收一个函数作为累加器，数组中的每个值（从左到右）开始缩减，最终计算为一个值。
> array.reduce(function(total, currentValue, currentIndex, arr), initialValue) 

|参数|	描述|
|--|--|
|total|	必需。初始值, 或者计算结束后的返回值。|
|currentValue|	必需。当前元素|
|currentIndex |可选。当前元素的索引|
|arr|	可选。当前元素所属的数组对象。|

```js
function getArraySum(nums){
    return nums.reduce((total, curr)=> total + curr, 0)
}
```

2, 数组排序
array.sort() 默认升序
```
arr.sort((a,b)=>a-b) // 升序
arr.sort((a,b)=>b-a) // 降序 
```

3, 求绝对值```Math.abs()```
```js
console.log(1-2)
```