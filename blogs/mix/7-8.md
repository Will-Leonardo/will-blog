---
title:  对象解构和数组解构
date: 2021-7-8
categories: 
 - javaScript
---
<Boxx type='tip' />

## 对象解构

:fish: 先来看一段代码：
```js
let obj = {
    "nickName": "lisi",
    "age": 12,
    "sex": "男"
}

let age = obj.age
let sex = obj.sex
let nickName = obj.nickName

console.log(age, sex, nickName) // 12 男 lisi
```

上面的操作相当于是将对象拆解，变成若干个变量。 但是，我们要知道如果要提取更多的变量，或者其中还包括嵌套结构，这个事情就会变得异常麻烦。这个时候ES6出了一个**对象解构**语法形式解决了该问题。

:fish: 再看下面这段代码：

```js
const obj = { "work": "前端工程师", "salary": "16*16" }
const { work, salary, school = "南昌大学" } = obj

console.log(work, salary, school)
```

**取别名：** 在变量后面加 ```: newName```, 就可以取别名，原名不在使用。

```js {2}
const obj = { "work": "前端工程师", "salary": "16*16" }
const { work: job, salary, school = "南昌大学" } = obj

console.log(salary, school, job) // 
```

**解构赋值：**    
在定义变量之后想要修改他们的值，可以这样……。在这个示例中，声明变量type和name时初始化了一个值，在后面的几行中，通过解构赋值的方法，从node对象读取相应的值重新为这两个变量赋值。**注意：一定要用一对小括号包裹解构赋值语句，javascript引擎将一对开放的花括号视为一个代码块，而语法规定，代码块不能出现在赋值语句的左侧，添加小括号后可以将块语句转化为一个表达式，从而实现整个解构赋值的过程。**
```js
let node = {
type:"Identifier",
name:"foo"
},

type = "Literal",
name = 5;

//使用解构语法为多个变量赋值
({type,name} = node);

console.log(type);//"Identifier"
console.log(name);//"foo"
```

**镶嵌对象解构**

```js 
let father = {
    name: "lisi",
    sex: "男",
    son: {
        son1: {
            name: "liqiang",
            age: 12
        },
        son2: {
            name: "liyue",
            age: 11
        }
    }
}
let { son: { son1 } } = father

console.log(Object.values(son1))
```


## 数组解构
与对象解构的语法相比，数组解构就简单多了，它使用的是数组字面量，且解构操作全部在数组内完成，而不是像对象字面量语法一样使用对象的命名属性
举个例子：

```js 
let colors = ["red", "white", "skyblue", "green"]

// let { 0: fontColor, 1: bgColor, 2: sideColor, 3: mianColor } = colors

let [color1, color2, color3] = colors 

// console.log(fontColor, bgColor, sideColor, mianColor) // red white skyblue green

console.log(color1, color2, color3)
```

**跳过某些值:** 

```js
let colors = ["red", "white", "skyblue", "green"]

// let { 0: fontColor, 1: bgColor, 2: sideColor, 3: mianColor } = colors

let [color1,   , color3] = colors 

// console.log(fontColor, bgColor, sideColor, mianColor) // red white skyblue green

console.log(color1, color3) // red, skyblue
```

**解构赋值：**
   数组解构也可用于赋值上下文，但不需要用小括号包裹表达式，这一点与对象解构的约定不同。

```js
let colors = ["red","green","blue"],
firstColor = "black",
secondColor = "purple";
[firstColor,secondColor] = color;
console.log(firstColor);//"red"
console.log(secondColor);//"green"
```

## 默认值

```js
let colors = ["red"];
let [firstColor,secondColor = "green"] = colors;
console.log(firstColor);//"red"
console.log(secondColor);//"green"
```


## 数据的对象解构
前面两种解构较为常见，下面这种解构，比较不常见，但是在特定的场合使用会特别方便。可以按照数组的索引来取变量。

```js
const str = "1997,kangkang,boy,23"
const { 0: year, 1: name, 2: sex, 3: age } = str.split(",")
// console.log(work, salary, year, sex, age)
```
