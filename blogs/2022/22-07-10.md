---
title: 策略模式
date: 2022-07-10
categories: 
 - javaScript
---
<Boxx type='tip' />

把看似毫无联系的代码提取封装、复用，使之更容易被理解和拓展。常见的用于一次if判断、switch枚举、数据字典等流程判断语句中

## 不好的写法

```js
function getExperience(level, experience){
  if(level == 'S'){
    return 4*experience
  }
  if(level == 'A'){
    return 3*experience
  }
  if(level == 'B'){
    return 2*experience
  }
  return experience
}
```
## 改进

```js
 // 改为策略模式 分成两个函数来写
const strategy = {
  'S' : function(experience){
    return 4*experience
  },
  'A' : function(experience){
    return 3*experience
  },
  'B' : function(experience){
    return 2*experience
  }
}
// getExperience可以复用
function getExperience(strategy, level, experience){
  return (level in strategy) ? strategy[level](experience) : experience
}
var s = getExperience(strategy, 'S', 100)
var a = getExperience(strategy, 'A', 100)
console.log(s, a) // 400 300
```

## 参考文章

- [深入浅出js中的策略模式](https://segmentfault.com/a/1190000021883055)