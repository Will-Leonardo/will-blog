---
title:  Vue相关知识 - Vue.set()
date: 2022-02-23
categories: 
 - Vue
---
<Boxx type='tip' />

## Vue.set()

请看下面两段代码: 

明明数据已经修改了，但是页面却没有按照数据响应式来显示。

```Vue { }
<template>
  <div>
    <div>
      <span>用户名: {{ userInfo.name }}</span>
      <span>用户性别: {{ userInfo.sex }}</span>
      <span v-if="userInfo.officialAccount">
        公众号: {{ userInfo.officialAccount }}
      </span>
    </div>
    <button @click="handleAddOfficialAccount">添加公众号</button>
  </div>
</template>
<script>
export default {
  data() {
    return {
      userInfo: {
        name: 'will',
        sex: '男'
      }
    }
  },
  methods: {
    // 在这里添加用户的公众号
    handleAddOfficialAccount() {
      this.userInfo.officialAccount = '椰子鑫png'
    }
  }
}
</script>

```

```Vue {}
<template>
  <div>
    <ul>
      <li v-for="item in list" :key="item">
        {{ item }}
      </li>
    </ul>
    <button @click="handleChangeName">修改名称</button>
  </div>
</template>
<script>
export default {
  data() {
    return {
      list: ['张三', '李四']
    }
  },
  methods: {
    // 修改用户名称
    handleChangeName() {
      this.list[0] = '王五'
    }
  }
}
</script>
```

**原因：** 在Vue内部，数据响应是通过使用Object.definePrototype监听对象的每一个键的getter,setter方法来实现的，但通过这种方法只能监听到已有属性，新增的属性是无法监听到的

**解决方案：** 


Vue官方专门提供了一个新的方法```Vue.set```用来解决新增属性无法触发数据响应。

```js
Vue.set(this.list,0,'王五')
```

但是每次要用到set方法的时候，还要把Vue引入进来，好麻烦，所以为了简便起见，Vue又将set方法挂载到了Vue的原型链上了，即
```Vue.prototype.$set = Vue.set```,所以在Vue组件内部可以直接使用this.$set代替Vue.set

```js
this.$set(this.userInfo,'officialAccount', '椰子鑫png')
```