---
title: Vue相关知识 - hookEvent, 原来可以这样监听组件生命周期
date: 2022-02-24
categories: 
 - Vue
---
<Boxx type='tip' />


## 场景

:strawberry: 场景1: mounted()中对事件event1进行监听，在beforeDestroy()生命周期时对event1进行销毁，但是mounted和eforeDestroy()中间可能
隔着很多业务逻辑代码，可读性比较差。 **[内部监听生命周期函数]**

```Vue
<script>
export default {
  mounted() {
    window.addEventListener('scroll', this.handleWindowScroll)
  },
  updated() {
    // 干了一堆活
  },
  created() {
    // 干了一堆活
  },
  beforeDestroy() {
    // 组件销毁时，销毁监听事件
    window.removeEventListener('scroll', this.handleWindowScroll)
  },
}
</script>
```


:strawberry: 场景2: 我在我的页面中引入了一个外部的组件，例如 ```Table``` 组件, ```Table``` 每次更新都会花较长时间，我希望在```Table```的数据更新时加一个 ```loading``` 效果,但是 该```Table```组件并没有提供 ```change```事件，这时我们会想到生命周期函数 ```updated()```, 但是在组件外部，我们怎么才能监听组件中的周期函数呢？


## 案例

:chestnut:

```Vue
<script>
export default {
  mounted() {
    window.addEventListener('scroll', this.handleWindowScroll)
    // 通过hook监听组件销毁钩子函数，并取消监听事件
    this.$once('hook:beforeDestroy', () => {
      window.removeEventListener('scroll', this.handleWindowScroll)
    })
  }
}

```


```Vue
<template>
  <!--通过@hook:updated监听组件的updated生命钩子函数-->
  <!--组件的所有生命周期钩子都可以通过@hook:钩子函数名 来监听触发-->
  <custom-Table @hook:updated="handleTableChange" />
</template>
```

