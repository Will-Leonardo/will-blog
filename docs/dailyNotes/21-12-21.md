---
title:  2021-12-21
date: 2021-12-21
---

<Boxx type='tip' />

## todo

1, æ•´ç† zs-wj çš„ä»£ç ï¼ŒåŒ…æ‹¬ README.md    âˆš 

2, å†™å¥½å­¦ä¹ çºªå½•   âˆš      

3, åˆå¹¶ä»£ç ï¼Œä¸Šçº¿ zs-wj å’Œ zhaoshangweb âˆš

4, æ–°å»º zs-clue-h5 é¡¹ç›®  ï¼ˆ Ã— ï¼‰ // æ— éœ€æ–°å»ºé¡¹ç›®ï¼ŒåŸæœ‰æ‹›å•†åŠ©æ‰‹é¡¹ç›®

5, æƒ³æƒ³æ€ä¹ˆå®Œå–„åšå®¢é‡Œé¢çš„todo  ï¼ˆ Ã— ï¼‰

## ä»Šæ—¥é˜…è¯»
<!-- ä»£ç è§„èŒƒ -->
- https://juejin.cn/post/7040855578679181342?utm_source=gold_browser_extension

<!-- ts -->
- https://juejin.cn/post/7011689911707238414?utm_source=gold_browser_extension 

- http://ts.xcatliu.com/introduction/what-is-typescript.html 

<!-- keep-alive ç›¸å…³ -->

- https://www.jianshu.com/p/ad5a16550d58 

- https://www.jianshu.com/p/575498c82f9a 

- https://zhuanlan.zhihu.com/p/93161800 

<!-- other -->
- https://juejin.cn/post/6990146025100935205?utm_source=gold_browser_extension 

## ä»Šæ—¥è§†é¢‘

ä»Šæ—¥åˆä¼‘è§‚çœ‹bilibiliå¦‚ä½•ç”¨å‰¯ä¸šèµšé’±

:strawberry: 1ï¼Œç½‘ç»œä¸Šæµä¼ çš„ æ— è´§æºå¼€ç½‘åº—ã€é…éŸ³ç­‰ç­‰å…¶å®é—¨æ§›æ˜¯æœ‰çš„ï¼Œè€Œä¸”ä¹Ÿéœ€è¦èŠ±å¾ˆå¤šæ—¶é—´åšã€‚ 2ï¼Œæ•™äººèµšé’±æœ€èµšé’±ã€‚ 3ï¼Œå¹²å¥½ä¸»ä¸šï¼Œé€šè¿‡ä¸»ä¸šè¡ç”Ÿå‰¯ä¸šæœ€å¥½ã€‚


## beforeRouteLeave  å½“ pathä¸å˜ä¸è§¦å‘ï¼Ÿ

## keep-alive å¤§æ€»ç»“

> åœ¨åšæ‹›å•†çº¿ç´¢è·å–ç§»åŠ¨ç«¯æ—¶ï¼Œé‡åˆ°é¡µé¢ç»„ä»¶ç¼“å­˜ç›¸å…³å’Œè¡ç”Ÿçš„é—®é¢˜ç­‰ï¼Œä¾‹å¦‚ï¼š1ï¼Œæ»šåŠ¨æ— é™åŠ è½½è¢«ç¼“å­˜ï¼Œåœ¨ä¸‹ä¸ªé¡µé¢æ»šåŠ¨ä¹Ÿä¼šè§¦å‘ã€‚
2ï¼Œåœ¨ç¼–è¾‘é¡µé¢ï¼Œæœªåšä»»ä½•ä¿®æ”¹ï¼ˆç›¸å½“äºæŸ¥çœ‹è¯¦æƒ…ï¼‰ï¼Œè¿”å›ä¸»é¡µæ—¶ï¼Œåº”è¯¥ç¼“å­˜çŠ¶æ€ï¼ˆä¸åˆ·æ–°ï¼Œç»´æŒä¹‹å‰çš„æ»šåŠ¨æ¡ä½ç½®ç­‰ï¼‰ï¼Œä¿®æ”¹äº†æ•°æ®æ—¶ï¼Œè¿”å›ä¸»é¡µé¢ï¼Œå°±
åº”è¯¥åˆ·æ–°æ•°æ®ã€‚3ï¼Œï¼ˆç§»åŠ¨ç«¯é‡ç‚¹è€ƒè™‘ï¼‰åœ¨ä¸»é¡µç‚¹å‡»è¿”å›åº”è¯¥é€€å‡ºåº”ç”¨ï¼Œè€Œä¸æ˜¯è¿”å›å‰ä¸€æ¡è·¯ç”±çºªå½•ï¼Œæ‰€ä»¥è¦æ³¨æ„è·¯ç”±æ ˆï¼Œåˆç†ä½¿ç”¨ ```this.router.push```\
```this.router.replace```\ ```this.router.go(-1)``` \ ```this.router.back()```

### ä»€ä¹ˆæ˜¯ keep-aliveï¼Ÿ æœ‰å•¥å­ç”¨ï¼Ÿ

> <keep-alive> åŒ…è£¹åŠ¨æ€ç»„ä»¶æ—¶ï¼Œä¼šç¼“å­˜ä¸æ´»åŠ¨çš„ç»„ä»¶å®ä¾‹ï¼Œè€Œä¸æ˜¯é”€æ¯å®ƒä»¬ã€‚å’Œ <transition> ç›¸ä¼¼ï¼Œ<keep-alive> æ˜¯ä¸€ä¸ªæŠ½è±¡ç»„ä»¶ï¼šå®ƒè‡ªèº«ä¸ä¼šæ¸²æŸ“ä¸€ä¸ª DOM å…ƒç´ ï¼Œä¹Ÿä¸ä¼šå‡ºç°åœ¨ç»„ä»¶çš„çˆ¶ç»„ä»¶é“¾ä¸­ã€‚

> å½“ç»„ä»¶åœ¨ <keep-alive> å†…è¢«åˆ‡æ¢æ—¶ï¼Œå®ƒçš„ mounted å’Œ unmounted ç”Ÿå‘½å‘¨æœŸé’©å­ä¸ä¼šè¢«è°ƒç”¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ activated å’Œ deactivatedã€‚(è¿™ä¼šè¿ç”¨åœ¨ <keep-alive> çš„ç›´æ¥å­èŠ‚ç‚¹åŠå…¶æ‰€æœ‰å­å­™èŠ‚ç‚¹ã€‚)

> ä¸»è¦ç”¨äºä¿ç•™ç»„ä»¶çŠ¶æ€æˆ–é¿å…é‡æ–°æ¸²æŸ“ã€‚


- Propsï¼š
   - include - string | RegExp | Arrayã€‚åªæœ‰åç§°åŒ¹é…çš„ç»„ä»¶ä¼šè¢«ç¼“å­˜ã€‚
   - exclude - string | RegExp | Arrayã€‚ä»»ä½•åç§°åŒ¹é…çš„ç»„ä»¶éƒ½ä¸ä¼šè¢«ç¼“å­˜ã€‚
   - max - number | stringã€‚æœ€å¤šå¯ä»¥ç¼“å­˜å¤šå°‘ç»„ä»¶å®ä¾‹ã€‚

å‚è€ƒï¼š[Vueå®˜æ–¹æ•™ç¨‹](https://v3.cn.vuejs.org/api/built-in-components.html#keep-alive)


:chestnut: æ¡ˆä¾‹äºŒ **ï¼ˆé‡è¦ï¼‰**

```HTML
<template>
  <div id="app">
    <!-- ç¼“å­˜é¡µé¢ -->
    <vue-page-stack>
      <router-view :key="$route.fullPath" class="router-view" v-if="$route.meta.keepAlive" />
    </vue-page-stack>
    <!-- éç¼“å­˜é¡µé¢ -->
    <router-view v-if="!$route.meta.keepAlive">
    </router-view>
  </div>
</template>
```

router.jsï¼šåˆ©ç”¨è·¯ç”±åŸmetaæ¥è®¾å®šæ˜¯å¦éœ€è¦ç¼“å­˜ï¼ˆè·¯ç”±åŸå¯ä»¥ç”¨æ¥è®¾å®šç»„ä»¶å’Œè·¯ç”±è€¦åˆæ¯”è¾ƒç´§çš„ä¿¡æ¯ï¼‰
```js
{
    path: '/list',
    meta: {
      title: 'æ‹›å•†çº¿ç´¢æ”¶é›†',
      keepAlive: true // éœ€è¦è¢«ç¼“å­˜
    },
    component: () => import(/* webpackChunkName: "list" */ '../views/clueList.vue')
  },
  {
    path: '/detail',
    meta: {
      title: 'é—®å·è¯¦æƒ…',
      keepAlive: true // éœ€è¦è¢«ç¼“å­˜
    },
    component: () => import(/* webpackChunkName: "detail" */ '../views/detail.vue')
  },
  {
    path: '/form',
    component: () => import(/* webpackChunkName: "form" */ '../views/form/index.vue'),
    meta: {
      keepAlive: false // ä¸éœ€è¦è¢«ç¼“å­˜
    }
}
```

pageAï¼šç¦»å¼€æ‰“æ–­æ— é™åŠ è½½ï¼Œè¿›å…¥å¼€å¯æ— é™åŠ è½½
```js
created () {
  this.requestData(this.pageNum, this.pageSize)
},
activated () {
  // å¼€å¯æ— é™åŠ è½½
  this.loading = false
},
deactivated () {
  // æ‰“æ–­æ— é™åŠ è½½
  this.loading = true
}
```
pageB: è·³è½¬åˆ°Aé¡µé¢åŒºåˆ†åˆ·æ–°ä¸ä¸åˆ·æ–°
```js
beforeRouteLeave (to, from, next) {
  // æœ‰æ“ä½œæ‰åˆ·æ–°åˆ—è¡¨
  if (to.path === '/list' && this.hashandle) {
    to.meta.keepAlive = false
  } else {
    to.meta.keepAlive = true
  }
  next()
}
```

- æ— é™åŠ è½½

åœ¨ç§»åŠ¨ç«¯ï¼Œæˆ‘ä»¬å¸¸è§çš„éƒ½æ˜¯æ»šåŠ¨åŠ è½½ï¼Œæ‰€ç”¨åˆ°çš„ç»„ä»¶ä¸ºæ— é™åŠ è½½ï¼ˆinfinite-loadï¼‰

åŸç†ï¼šæ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨åŠ è½½ä¸‹ä¸€é¡µã€‚

æ ¸å¿ƒä»£ç ï¼š

```js {4}
loadmore () {
  const scrollDistance = (this.scrollObj && this.scrollObj.getBoundingClientRect ? this.scrollObj.getBoundingClientRect().top : 0) + this.scrollContainerHeight + this.offset
  if (this.$refs.loadmore.getBoundingClientRect().top <= scrollDistance && !this.loading && !this.isFinished && !this.isError) {
    this.$emit('loadmore')
  }
},
loadEnd () {
  this.isFinished = true
  this.scrollObj.removeEventListener('scroll', this.loadmore)
},
```

## encodeURIComponent

åœºæ™¯ï¼šæˆ‘ä½¿ç”¨äº†ä¸€ä¸ª ```href="xxx.jd.com/index/from?id=123&returnUrl=https://xxx.jd.com"```, åœ¨codereviewæ—¶ï¼Œè¢«æŒ‡å‡ºè¦æ±‚ä½¿ç”¨encodeURIComponentï¼Œé¿å…è§£æé”™è¯¯ã€‚

> encodeURIComponent()å‡½æ•°é€šè¿‡å°†ä¸€ä¸ªï¼Œä¸¤ä¸ªï¼Œä¸‰ä¸ªæˆ–å››ä¸ªè¡¨ç¤ºå­—ç¬¦çš„UTF-8ç¼–ç çš„è½¬ä¹‰åºåˆ—æ›¿æ¢æŸäº›å­—ç¬¦çš„æ¯ä¸ªå®ä¾‹æ¥ç¼–ç  URI ï¼ˆå¯¹äºç”±ä¸¤ä¸ªâ€œä»£ç†â€å­—ç¬¦ç»„æˆçš„å­—ç¬¦è€Œè¨€ï¼Œå°†ä»…æ˜¯å››ä¸ªè½¬ä¹‰åºåˆ—ï¼‰ ã€‚

```h
 :href="`https://xx.jd.com/Register?settleType=4&returnUrl=${encodeURIComponent('https://xxx.jd.com')`"
```

## ä»£ç è§„èŒƒ

åœºæ™¯ï¼šç©ºæ ¼ï¼Œç¬¦å·é—®é¢˜è¢«æŒ‡å‡ºè›®å°´å°¬çš„ï¼ŒğŸ˜

æ¨èé˜…è¯»ï¼š[å…ˆåšäººååšäº‹,å…ˆå­¦è§„èŒƒå†å†™ä»£ç ](https://juejin.cn/post/7040855578679181342?utm_source=gold_browser_extension)

