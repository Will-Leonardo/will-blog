---
title:  2021-10-18
date: 2021-10-18
---

<Boxx type='tip' />

## 1， 一个请求结束之后再发送另外一个请求

- 回调地狱

[打不死的回调地狱？](https://zhuanlan.zhihu.com/p/39580112)

```js
const dosth = new Promise((resolve, reject) =>{
    console.time('dosth')
    setTimeout(()=>{
        console.log('i am did sth')
        resolve('success')
    }, 1000)
})

dosth.then(res=>{
    console.timeEnd('dosth')
    console.log('你完成了没有？')
    console.log(res)
})
```

- async 和 await

[理解 JavaScript 的 async/await](https://segmentfault.com/a/1190000007535316)

```js
function takeLongTime(n) {
    return new Promise(resolve => {
        setTimeout(() => resolve(n + 200), n);
    });
}

async function doIt() {
    console.time("doIt");
    const time1 = 300;
    const time2 = await step1(time1);
    const time3 = await step2(time2);
    const result = await step3(time3);
    console.log(`result is ${result}`);
    console.timeEnd("doIt");
}
doIt();
```

## 2, promise中的this

Promise对象的回调函数是匿名函数时，this指向window，需要对回调函数bind(this)来改变其this指向。

Promise对象的回调函数是箭头函数时，this指向外层第一个普通函数的this。本例中指向Vue实例

## 3，js 中的四舍五入

- toFixed(n)        
四舍五入为需要的小数位的**字符串**,  字符串转Number  =》 Number('str')

```js
console.log(123.567.toFixed(1)) // 123.6
console.log(-123.567.toFixed(1)) // -123.6
```

- round()         
round() 方法可把一个数字舍入为最接近的整数。

```js
console.log(Math.round(3.6)) // 4
console.log(Math.round(-3.6)) // -3
```
- Math.ceil()

```
Math.ceil(12.34);//13
Math.ceil(12.68);//13
```
- Math.floor()
```
Math.floor(12.34); // 12
Math.floor(12.68); // 12
```

## 4, HTML跳转到页面指定位置的几种方法

[参考文章](https://juejin.cn/post/6868968417769029640)

## 5, ~ 和 @ 
在项目中我们常常会使用 @ 表示 src目录，这其实依赖了webpack的下面这个配置：

```js
 alias: {
      '@': resolve('src')
 }
```

## 6, 数据单位处理

Math.log(x)  x的自然对数
Math.pow(x, y)  以x为低y为mi
```js
var numberFormat = function (value) {
            var param = {};
            var k = 10000,
                sizes = ['', '万', '亿', '万亿'],
                i;
            if(value < k){
                param.value =value
                param.unit=''
            }else{
                i = Math.floor(Math.log(value) / Math.log(k)); 
                param.value = ((value / Math.pow(k, i))).toFixed(2);
                param.unit = sizes[i];
            }
        return param;
    }
console.log(numberFormat(15222256.33))  // { value: '1522.23', unit: '万' }
```

## 7，Vue 的filter、computed、watch

这三个都支持自定义一个函数来处理变量的值，其中filter和computed不支持异步返回，watch支持异步返回。

```Vue
<template>
    <div>{{ yourName | NameToRe}}<div>
</template>
……
data:{
    fistName: '',
    lastName: ''
},
computed:{
    yourName(){
        return: this.firstName + this.lastName
    }
},
watch:{
    fistName(){
        console.log('your fistName has changed')
    }
},
filter:{
    NameToRe(val){
        let arr = val.split(' ')
        arr.reverse()
        console.log(arr.join(' '))
    }
}
……
```

## 8, 赋值后再发请求

主要利用的是 回调函数
```js 
this.setState({
            tab: value
        }, () => {
            this.getAllData()
        })
```

## 9，Vue 动态id值
在使用echart时，我将包含echart部分内容包装为组件，在使用改组件时，发现只有一个显示；
**原因：** Dom的 id 唯一； **resolve：** 传递动态id值。


## 10，Vue 属性绑定

**注意：**  :class = 'isActive' 和 :class = " 'isActive' " 的区别

## 11，momentjs的使用
在实际项目开发中，时间总是要以各种格式显示的，momentjs的使用很重要。



## 12，Vue.prototype.xxx = xxx 
用Vue.prototype.xxx = xxx 把一个方法或者属性添加到Vue对象的原型上， 这样，我们在vue实例的任何地方，都可以用这个方法或属性了

:chestnut:

```js

// main.js
import echarts from 'echarts'

Vue.prototype.$echarts = echarts

……

// other.vue
// 在其他页面就可以直接使用
this.echarts ……

```
[原型对象](https://juejin.cn/post/6844904200187412493)

## 