---
title:  2022 年 01 月 18 日
date: 2022-01-18
---

<Boxx type='tip' />

> 许久没有写博客了。 

## videojs

需求： 
- 版本1，显示一张图片，点击图片全屏播放视频，退出全屏后图片隐藏，在图片的位置显示小框继续播放视频。（其实可以试试设置视频封面的方法。）
- 版本2，视频存在多个，需要添加轮播效果。 


## 版本1
分析：
1，通过定位将```img``` 和 ```video```重叠 。
2，当点击图片时将图片隐藏，这样就能显示视频了。
3，

参考代码：

```html
<img v-show="isImgShow" :src="videoData.imgUrl" class="resident__video-img" @click="clickVideoImg"/>
<video id="videobox" ref="videoRef" class="video-js vjs-default-skin vjs-big-play-centered video-player-dimensionsvjs-controls-enabled vjs-workinghover vjs-v5 vjs-user-active vjs-paused resident__video-video" controls preload="auto"webkit-playsinline="true" playsinline="true" width="100%">
  <source id="sourceBox" :src="videoData.videoUrl">
</video>
```

```js
this.video = this.$video('videobox', {
      bigPlayButton: true,
      controls: true,
      preload: 'auto', // 是否预加载 'auto''metadata''none'
      textTrackDisplay: true,
      posterImage: true,
      errorDisplay: false,
      controlBar: false,
      playbackRates: [0.5, 1, 1.5, 2],
      inactivityTimeout: false,
      language: 'zh-CN', // 设置语言
      ControlBar: {
        customControlSpacer: true,
        timeDivider: true, // 时间分割线
        durationDisplay: false, // 总时间
        progressControl: true, // 进度条
        fullscreenToggle: true, // 全屏
        currentTimeDisplay: false,
        remainingTimeDisplay: false,
        volumePanel: {
          inline: false,
        },
      },
    });
```


```js
clickVideoImg() {
  this.isImgShow = false;
  this.$nextTick(() => {
    this.$refs.videoRef.play();
    // eslint-disable-next-line no-underscore-dangle
    this.video.boundHandleTechDoubleClick_(this.$refs.videoRef);
  });
},
```

## 版本二

参考代码

```html
<el-carousel :autoplay="autoplay" height="260px" arrow="always" @change="changeVideo">
  <el-carousel-item v-for="(item,index) in videoData" :key="index">
    <img :src="item.imgUrl" class="resident__video-img" @click="clickVideoImg(index)"/>
  </el-carousel-item>
</el-carousel>
<video id="videobox" ref="videoRef" class="video-js vjs-default-skin vjs-big-play-centered video-player-dimensionsvjs-controls-enabled vjs-workinghover vjs-v5 vjs-user-active vjs-paused resident__video-video" controls preload="auto"webkit-playsinline="true" playsinline="true" width="100%">
</video>
```

```js
clickVideoImg(index) {
  this.$nextTick(() => {
    this.$refs.videoRef.src = this.videoData[index].videoUrl; // 替换视频地址
    this.$refs.videoRef.play();
    // eslint-disable-next-line no-underscore-dangle
    this.video.boundHandleTechDoubleClick_(this.$refs.videoRef);
  });
},
changeVideo(index) {
  this.$refs.videoRef.src = this.videoData[index].videoUrl; // 替换视频地址
},
```

```js
this.video.on('fullscreenchange', () => {
  this.autoplay = !this.autoplay;
});
```


## 拓展阅读

1，[西瓜播放器](https://juejin.cn/post/7023547598724136990), [doc](http://v2.h5player.bytedance.com/)
