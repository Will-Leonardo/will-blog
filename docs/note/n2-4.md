---
title:  React.js 入门
date: 2021-1-28
tags:
 - React.js

categories: 
 - React.js
---
<Boxx type="tip" />

:strawberry: React全家桶-> React基础、React-Router、PubSub、Redux、Ant-Design   

---

:fish: 清楚两个概念： 库library 和 框架 framework  
- library ： 小而巧， 可以很方便的从一个库转换到另一个库， 比如说 jQuery 
- framework： 大而全，框架提供了一整套的解决方案， 比如 Vue的全家桶

::: details 重绘和重排
**重绘不一定需要重排，重排必然会导致重绘**
- 重排： 当渲染树的一部分必须更新并且节点的尺寸发生了变化，浏览器会使渲染树中受到影响的部分失效，并重新构造渲染树。
1）添加、删除可见的dom

2）元素的位置改变

3）元素的尺寸改变（外边距、内边距、边框厚度、宽高等几何属性）

4）页面渲染初始化

5）浏览器窗口尺寸改变

- 重绘： 是在一个元素的外观被改变所触发的浏览器行为，浏览器会根据元素的新属性重新绘制，使元素呈现新的外观。

- **减少reflow、repaint**

1、不要一条一条的修改DOM的样式，可以先定义好css的class，然后修改DOM的className。

2、不要把DOM结点的属性值放在一个循环里当成循环里的变量。

3、为动画的HTML元件适用fixed或absolute的position，那么修改他们的css是不会reflow
:::

## 几个核心的概念
### :fish: 虚拟DOM
- **DOM**： 浏览器中的概念，文档对象模型，用js对象表示页面上的元素，并提供了操作dom对象的API
- **虚拟DOM**：框架中的概念，用js对象来模拟页面上的DOM和DOM嵌套关系
- **为什么需要需要DOM**： 为了实现页面中，DOM元素的高效更新。
::: details 什么是虚拟DOM？

- **什么是虚拟DOM？**        
程序员手动利用js模拟的两棵新旧DOM树，就是React中虚拟DOM的概念;
- **为什么需要程序员手动模拟两棵DOM树？**          
浏览器中，并没有直接提供获取DOM树的API，因此，我们无法拿到浏览器内存中的DOM树
- **为什么需要DOM树？**        
我们只需要对比新旧DOM树，就可以知道哪些节点需要改变，而不是整个DOM树进行更改，打打的提高了性能。
:::
### :fish: Diff算法
diff 就是 different 的意思，寻找差异， diff算法 包括  tree diff、 component diff、 element diff
- **tree diff:**       
新旧两棵DOM树，逐层对比的过程             
- **component diff：**        
在进行Tree diff 的时候，每一层中，组件级别的对比，叫做Component Diff， 如果组件的类型不同则移除旧组件，追加新组件到页面上。
- **element diff**       
在进行组件对比的时候，如果两个组件类型相同，则需要进行元素级别的对比，这叫做element diff

## 创建虚拟DOM
- 纯js的方式（一般不用）
```js
cosnt VDOM = React.createElement('h1', {id: 'title'}, React.createElement('span', {}, "hello"))
```
- jsx 方式 （推荐使用）    
jsx 的出现就是解决js 创建虚拟dom时出现套娃.
```js
const VDOM = <h1><span>hello</span></h1>     //注意不加引号
```

## JSX

1, 全称： JavaScript XML        
2, 主要是用来创建虚拟DOM
```js
const VDOM = (
    <h2 id="title2">
        <span>hello</span>
    </h2>
)
```
3, 语法规则
> 1, 定义虚拟DOM时，不要写引号         
> 2, 标签中混入js表达式（如使用变量），注意要使用 { } 包裹         
> 3, 样式的类名指定不用用class，要用className            
> 4, 内联样式时，需要加 {{ }}       
> 5, 根标签只能有一个 


## React面向组件编程

:fish: 创建组件的两种方法：    
- function  函数定义简单组件
- class     类定义复杂组件


## 脚手架创建React项目

- 安装脚手架

```
npm install -g create-react-app
```

- 创建项目

```
create-react-app my-app
```

- 运行

```
cd my-app
npm start
```




<Vssue  />


 
  